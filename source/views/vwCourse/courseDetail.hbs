{{#section 'titleExtraText'}}| My profile {{/section}}

{{#section 'css'}}
<link rel="stylesheet" type="text/css" href="/css/vwCourse/courseDetail.css">
{{/section}}

{{#section 'js'}}
<script type="text/javascript" src="/js/vwCourse/courseDetail.js"></script>
<script>
  $(function () {
    $(".sticky").sticky({
      topSpacing: 90,
      zIndex: 2,
      stopper: "footer"
  });
  var navOffset = parseInt($('body').css('padding-top'));
  $('body').scrollspy({ target: '#scrollspy', offset: 200  });

});
</script>
{{/section}}

<div class="container">
  <div class="row">

    <!-- Main Container -->
    <div class="col-lg-10 col-md-12 scrollspy-container" data-offset="0">
      <div class="container">
        <!-- Section: Product detail -->
        <section id="productDetails" class="pb-5">

          <!-- News card -->
          <div class="card mt-5 hoverable">

            <div class="row">

              <div class="col-lg-6">
                <img class="img-fluid" style="width: 480px;height: 270px;" src="{{course.image}}" alt="First slide">
              </div>

              <div class="col-lg-5 mr-3 text-center text-md-left">
                <h5
                  class="h5-responsive text-center text-md-left product-name font-weight-bold dark-grey-text mb-1 ml-xl-0 ml-4 mt-2">
                  <strong>{{course.title}}</strong>
                </h5>

                <h5 class="h5-responsive text-center text-md-left mb-1 ml-xl-0 ml-4">
                  {{#is course.discount 0}}
                  <span class="red-text font-weight-bold">
                    <strong>{{course.full_price}} </strong>
                    <small>
                      $
                    </small>
                  </span>
                  {{else}}

                  <span class="grey-text">
                    <s>
                      <strong>{{course.full_price}} </strong>
                      <small>
                        $
                      </small>
                    </s>
                    <span class="red-text font-weight-bold">
                      <strong>{{course.price}} </strong>
                      <small>
                        $
                      </small>
                    </span>
                  </span>
                  {{/is}}
                </h5>

                <h5 class="h5-responsive text-center text-md-left ml-xl-0 ml-4">
                  <span>
                    <small class="orange-text">{{avgStar}}</small>
                    <span>
                      <script>
                        var point = {{ avgStar }};
                        for (var j = 1; j <= 5; j++) {
                          if (point >= 1) {
                            document.write('<i class="fas fa-star orange-text"></i>');
                            point -= 1;
                            continue;
                          }
                          if (point > 0) {
                            document.write('<i class="fas fa-star-half orange-text"></i>');
                            point -= 1;
                            continue;
                          }
                          document.write('<i class="far fa-star orange-text"></i>');
                          point -= 1;
                        }
                      </script>
                    </span>
                    <span>({{numRating}} ratings) {{numStudent}} students</span>
                  </span>
                </h5>

                <h5 class="h4-responsive text-center text-md-left ml-xl-0 ml-4">
                  <span>Create by</span>
                  <span><a href="#instructorInfo">{{instructor.fullname}}</a></span>
                </h5>

                <h5 class="h4-responsive text-center text-md-left ml-xl-0 ml-4">
                  Last update:
                  <script>
                    var d = new Date("{{course.last_update}}");
                    var last_update = d.getDate() + '/' + (d.getMonth() + 1) + '/' + d.getFullYear();
                    document.write(last_update)
                  </script>
                </h5>

                {{#if isBuy}}
                <a class="" data-toggle="tooltip" data-placement="top" title="Was buy">
                  <i class="fas fa-check ml-3"></i>
                </a>
                {{else}}
                {{#if inCart}}
                <a class="" data-toggle="tooltip" data-placement="top" title="In Cart" href="/cart">&nbsp;&nbsp;
                  <i class="fas fa-luggage-cart"></i>
                </a>
                {{else}}
                <a class="" id="addToCard{{id}}" data-toggle="tooltip" data-placement="top" title="Add to Cart"
                  onclick="addToCartFunction({{id}});">
                  <i class="fas fa-cart-plus ml-3"></i>
                </a>
                {{/if}}
                {{/if}}
              </div>

            </div>

          </div>

        </section>
      
        <section id="description">
          <div class="divider-new">
            <h3 class="h3-responsive font-weight-bold blue-text mx-3">Description</h3>
          </div>

          <div>
            <p>{{{course.full_description}}}</p>
          </div>
        </section>

        <!--Course content-->
      <div class="divider-new">
        <h3 class="h3-responsive font-weight-bold blue-text mx-3">Course outline</h3>
      </div>

      {{#if chapters}}
      <div class="accordion md-accordion" id="accordionEx1" role="tablist" aria-multiselectable="true">
        {{#each chapters}}
        <!-- Accordion card -->
        <div class="card">

          <!-- Card header -->
          <script>
            console.log("{{../chapter_id}} {{this.chapter_id}}");
          </script>
          <div class="card-header" role="tab" id="headingTwo{{this.chapter_id}}">
            <a class="collapsed" data-toggle="collapse" data-parent="#accordionEx1"
              href="#collapseTwo{{this.chapter_id}}" aria-expanded="true"
              aria-controls="collapseTwo{{this.chapter_id}}">
              <h5 class="mb-0">
                {{this.chapter_name}} <i class="fas fa-angle-down rotate-icon"></i>
              </h5>
            </a>
          </div>

          <!-- Card body -->
          <div id="collapseTwo{{this.chapter_id}}" class="collapse show" role="tabpanel"
            aria-labelledby="headingTwo{{this.chapter_id}}" data-parent="#accordionEx1">
            <div class="card-body">
              <ul class="list-unstyled">
                {{#each this.lectures}}
                <!-- Material checked -->
                    {{#if this.preview}}
                    <li><a href="" class="text-default lectureName ml-3">
                      {{this.name}}
                    </a></li>
                    {{else}}
                    <li>
                      <a class="lectureName ml-3">{{this.name}}</a>
                    </li>
                    {{/if}}
                {{/each}}
              </ul>
              </div>
            </div>

          </div>
          <!-- Accordion card -->
          {{/each}}
        </div>
        <!-- Accordion wrapper -->
        {{else}}

        {{/if}}

        <!-- instructor -->
        <section id="instructor">
          <div class="divider-new">

            <a class="h3-responsive font-weight-bold blue-text mx-3" id="instructorInfo">Instructor information</a>

          </div>
          <h3 class="blue-text">{{instructor.fullname}}</h3>
          <p>{{instructor.bio}}</p>
          <div class="row mb-5">
            <!-- Image column -->
            {{#if instructor.photo}}
            <div class="col-sm-2 col-12 mb-3">
              <img src="{{instructor.photo}}" alt="sample image" class="imageInstructor">
            </div>
            {{else}}
            <div class="col-sm-2 col-12 mb-3">
              <img src="http://placehold.it/150" alt="sample image" class="imageInstructor">
            </div>
            {{/if}}
            <!-- Image column -->

            <!-- Content column -->
            <div class="col-sm-10 col-12 mt-2">
              <p>
                <i class="fas fa-star orange-text"></i>
                <span> &nbsp;&nbsp;{{instructorAvgStart}} Instructor rating</span>
              </p>
              <p>
                <i class="fas fa-eye orange-text"></i>
                <span> &nbsp;&nbsp;{{instructorReview}} Review</span>
              </p>
              <p>
                <i class="fas fa-user-friends orange-text"></i>
                <span> &nbsp;&nbsp;{{instructorStudent}} Student</span>
              </p>
              <p>
                <i class="fab fa-youtube orange-text"></i>
                <span> &nbsp;&nbsp;{{instructorCourse}} Course</span>
              </p>
            </div>
            <!-- Content column -->

          </div>
          <p>{{instructor.about_me}}</p>
        </section>

        <!-- Reviews -->
        <section id="reviews">

          <!-- Section: reviews -->
          <div class="divider-new">
            <h3 class="h3-responsive font-weight-bold blue-text mx-3">Reviews</h3>
          </div>

          <!-- Main wrapper -->
          <div class="comments-list text-center text-md-left">
            {{#if review}}
            {{#each review}}
            <div class="row mb-5">

              <!-- Image column -->
              {{#if photo}}
              <div class="col-sm-2 col-12 mb-3">
                <img src="{{photo}}" alt="sample image" class="imagePreview">
              </div>
              {{else}}
              <div class="col-sm-2 col-12 mb-3">
                <img src="http://placehold.it/100" alt="sample image" class="imagePreview">
              </div>
              {{/if}}
              <!-- Image column -->

              <!-- Content column -->
              <div class="col-sm-10 col-12">

                <a>
                  <h5 class="user-name font-weight-bold">{{username}}</h5>
                </a>

                <!-- Rating -->
                <ul class="rating">
                  <script>
                    for (var j = 1; j <= {{ point }}; j++) {
                      document.write('<i class="fas fa-star blue-text"></i>')
                    }
                  </script>
                </ul>

                <div class="card-data">

                  <ul class="list-unstyled mb-1">

                    <li class="comment-date font-small grey-text">
                      <script>
                        var d = new Date("{{feedback_date}}");
                        document.write('<i class="far fa-clock-o"></i>' + d.getDate() + '/' + d.getMonth() + '/' + d.getFullYear())
                      </script>
                    </li>
                  </ul>

                </div>

                <p class="dark-grey-text article">{{comment}}</p>

              </div>
              <!-- Content column -->

            </div>
            {{/each}}
            {{/if}}
          </div>
          <!-- Main wrapper -->

        </section>

        <!-- Section -->
        <section id="products">
          <div class="divider-new">
            <h3 class="h3-responsive font-weight-bold blue-text mx-3">Related course</h3>
          </div>
          <!-- Carousel Wrapper -->
          <div id="multi-item-example" class="carousel slide carousel-multi-item" data-ride="carousel">

            <!-- Controls -->
            <div class="controls-top">
              <a class="btn-floating primary-color" href="#multi-item-example" data-slide="prev">
                <i class="fas fa-chevron-left"></i>
              </a>

              <a class="btn-floating primary-color" href="#multi-item-example" data-slide="next">
                <i class="fas fa-chevron-right"></i>
              </a>

            </div>
            <!-- Controls -->

            <!-- Indicators -->
            <ol class="carousel-indicators">
              <li class="primary-color" data-target="#multi-item-example" data-slide-to="0" class="active"></li>
              <li class="primary-color" data-target="#multi-item-example" data-slide-to="1"></li>
              <li class="primary-color" data-target="#multi-item-example" data-slide-to="2"></li>
            </ol>
            <!-- Indicators -->

            <!-- Slides -->
            <div class="carousel-inner" role="listbox">
              <script>
                var num = 0;
              </script>
              {{#each relateItems}}
              <script>
                if (num % 3 === 0) {
                  if (num === 0)
                    document.write(`<div class="carousel-item active">`);
                  else
                    document.write(`<div class="carousel-item">`);
                }
              </script>

              <div class="col-md-4 clearfix d-none d-md-block mb-4">

                <!-- Card -->
                <div class="card card-ecommerce">

                  <!-- Card image -->
                  <div class="view overlay">
                    <img src="{{image}}" class="imageSlide" alt="">
                    <a href="/course/{{id}}">
                      <div class="mask rgba-white-slight"></div>
                    </a>
                  </div>
                  <!-- Card image -->

                  <!-- Card content -->
                  <div class="card-body">
                    <!-- Category & Title -->
                    <h5 class="card-title mb-1">
                      <strong>
                        <a href="/course/{{id}}" class="dark-grey-text">{{title}}</a>
                      </strong>

                    </h5>
                    {{#each tag}}
                    <span class="badge badge-danger mb-2">{{name}}</span>
                    {{/each}}
                    <!-- Rating -->
                    <ul class="rating"> {{avgStar}}
                      <script>
                        var point = {{ avgStar }};
                        for (var j = 1; j <= 5; j++) {
                          if (point >= 1) {
                            document.write(`<i class="fas fa-star orange-text"></i>`);
                            point -= 1;
                            continue;
                          }
                          if (point > 0) {
                            document.write('<i class="fas fa-star-half orange-text"></i>');
                            point -= 1;
                            continue;
                          }
                          document.write('<i class="far fa-star orange-text"></i>');
                          point -= 1;
                        }
                      </script>
                      <span class="mdb-color-text">total rating: {{total_rating}}</span>
                    </ul>

                    <!-- Card footer -->

                  </div>
                  <div class="card-footer pb-0">

                    <div class="row mb-0">

                      <span class="float-left">

                        <h5 class="h5-responsive text-center text-md-left mb-1 ml-xl-0 ml-4">
                          {{#is discount 0}}
                          <span class="red-text font-weight-bold">
                            <strong>{{this.full_price}} </strong>
                            <small>
                              $
                            </small>
                          </span>
                          {{else}}

                          <span class="grey-text">
                            <s>
                              <strong>{{this.full_price}} </strong>
                              <small>
                                $
                              </small>
                            </s>
                            <span class="red-text font-weight-bold">
                              <strong>{{this.price}} </strong>
                              <small>
                                $
                              </small>
                            </span>
                          </span>
                          {{/is}}

                      </span>

                      <span class="float-right">
                        {{#if isBuy}}
                        <a class="" data-toggle="tooltip" data-placement="top" title="Was buy">

                          <i class="fas fa-check ml-3"></i>

                        </a>
                        {{else}}
                        {{#if inCart}}
                        <a class="" data-toggle="tooltip" data-placement="top" title="In Cart"
                          href="/cart">&nbsp;&nbsp;
                          <i class="fas fa-luggage-cart"></i>
                        </a>
                        {{else}}
                        <a class="" id="addToCard{{id}}" data-toggle="tooltip" data-placement="top"
                          title="Add to Cart" onclick="addToCartFunction({{id}});">
                          <i class="fas fa-cart-plus ml-3"></i>
                        </a>
                        {{/if}}
                        {{/if}}

                      </span>

                    </div>
                  </div>

                </div>
                <!-- Card -->

              </div>

              <script>
                if (num % 3 === 2)
                  document.write('</div>');
                num++;
              </script>
              {{/each}}
            </div>
            <!-- Slides -->

          </div>
          <!-- Carousel Wrapper -->

        </section>
        <!-- Section -->

      </div>
    </div>

    <div class="col-lg-2 mt-5 ">
      <div class="sticky">
        <div id="scrollspy">
          <ul class="nav nav-pills default-pills smooth-scroll navbar-scrollspy" >
            <li class="nav-item">
              <a class="nav-link active" href="#productDetails">Product details</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#description">Description</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#accordionEx1">Course outline</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#instructor">Instructor</a>
            </li>                      
            <li class="nav-item">
              <a class="nav-link" href="#reviews">Review</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#products">Related courses</a>
            </li>

          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Main Container -->
